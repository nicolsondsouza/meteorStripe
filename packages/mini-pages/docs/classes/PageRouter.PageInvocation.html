<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>PageRouter.PageInvocation - mini-pages</title>
    <link rel="stylesheet" href="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;3.8.0pr2&#x2F;build&#x2F;cssgrids&#x2F;cssgrids-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="..&#x2F;assets/favicon.png">
    <script src="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;combo?3.8.0pr2&#x2F;build&#x2F;yui&#x2F;yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="..&#x2F;assets/css/logo.png" title="mini-pages"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 0.3.0</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="..&#x2F;classes/MeteorExtensions.html">MeteorExtensions</a></li>
            
                <li><a href="..&#x2F;classes/PageRouter.html">PageRouter</a></li>
            
                <li><a href="..&#x2F;classes/PageRouter.Page.html">PageRouter.Page</a></li>
            
                <li><a href="..&#x2F;classes/PageRouter.PageInvocation.html">PageRouter.PageInvocation</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1>PageRouter.PageInvocation Class</h1>
<div class="box meta">
    

    

    
        <div class="foundat">
            Defined in: <a href="..&#x2F;files&#x2F;lib_mini-pages.js.html#l728"><code>lib&#x2F;mini-pages.js:728</code></a>
        </div>
    

    

    
</div>



<div class="box intro">
    <p>Created each time the url path changes and a page is run. The PageInvocation
allows before filters to dynamically set the template, layout and nav, and
provides methods for redirecting, stopping execution of the before filters and
getting and setting page variables that will be cleaned up when a new page
is run.</p>

<p>Instances are created automatically by the PageRouter when a path change
causes the router's run method to be called. The PageInvocation instance
is the value of <code>this</code> in all before filters.</p>
</div>


    <div class="constructor">
        <h2>Constructor</h2>
        <div id="method_PageRouter.PageInvocation" class="method item">
    <h3 class="name"><code>PageRouter.PageInvocation</code></h3>

    
        <div class="args">
            <span class="paren">(</span><ul class="args-list inline commas">
            
                <li class="arg">
                    
                        <code>router</code>
                    
                </li>
            
                <li class="arg">
                    
                        <code>page</code>
                    
                </li>
            
                <li class="arg">
                    
                        <code class="optional">[context]</code>
                    
                </li>
            
            </ul><span class="paren">)</span>
        </div>
    

    

    

    

    

    

    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="..&#x2F;files&#x2F;lib_mini-pages.js.html#l728"><code>lib&#x2F;mini-pages.js:728</code></a>
        
        </p>


        

        
    </div>

    <div class="description">
        
    </div>

    
        <div class="params">
            <h4>Parameters:</h4>

            <ul class="params-list">
            
                <li class="param">
                    
                        <code class="param-name">router</code>
                        <span class="type"><a href="../classes/PageRouter.html" class="crosslink">PageRouter</a></span>
                    

                    

                    <div class="param-description">
                        <p>A page router instance.</p>
                    </div>

                    
                </li>
            
                <li class="param">
                    
                        <code class="param-name">page</code>
                        <span class="type"><a href="../classes/PageRouter.Page.html" class="crosslink">PageRouter.Page</a></span>
                    

                    

                    <div class="param-description">
                        <p>A page instance.</p>
                    </div>

                    
                </li>
            
                <li class="param">
                    
                        <code class="param-name optional">[context]</code>
                        <span class="type">Object</span>
                        <span class="flag optional" title="This parameter is optional.">optional</span>
                    

                    

                    <div class="param-description">
                        <p>An optional context object.</p>
                    </div>

                    
                </li>
            
            </ul>
        </div>
    

    

    
</div>

    </div>


<div id="classdocs" class="tabview">
    <ul class="api-class-tabs">
        <li class="api-class-tab index"><a href="#index">Index</a></li>

        
            <li class="api-class-tab methods"><a href="#methods">Methods</a></li>
        
        
        
            <li class="api-class-tab attrs"><a href="#attrs">Attributes</a></li>
        
        
    </ul>

    <div>
        <div id="index" class="api-class-tabpanel index">
            <h2 class="off-left">Item Index</h2>

            
                <div class="index-section methods">
                    <h3>Methods</h3>

                    <ul class="index-list methods">
                        
                            <li class="index-item method">
                                <a href="#method_done">done</a>

                                
                                
                            </li>
                        
                            <li class="index-item method">
                                <a href="#method_get">get</a>

                                
                                
                            </li>
                        
                            <li class="index-item method">
                                <a href="#method_isDone">isDone</a>

                                
                                
                            </li>
                        
                            <li class="index-item method">
                                <a href="#method_isStopped">isStopped</a>

                                
                                
                            </li>
                        
                            <li class="index-item method">
                                <a href="#method_layout">layout</a>

                                
                                
                            </li>
                        
                            <li class="index-item method">
                                <a href="#method_redirect">redirect</a>

                                
                                
                            </li>
                        
                            <li class="index-item method">
                                <a href="#method_set">set</a>

                                
                                
                            </li>
                        
                            <li class="index-item method">
                                <a href="#method_stop">stop</a>

                                
                                
                            </li>
                        
                            <li class="index-item method">
                                <a href="#method_template">template</a>

                                
                                
                            </li>
                        
                            <li class="index-item method">
                                <a href="#method_template">template</a>

                                
                                
                            </li>
                        
                            <li class="index-item method">
                                <a href="#method_toObject">toObject</a>

                                
                                
                            </li>
                        
                    </ul>
                </div>
            

            

            
                <div class="index-section attrs">
                    <h3>Attributes</h3>

                    <ul class="index-list attrs">
                        
                            <li class="index-item attr">
                                <a href="#attr_context">context</a>
                            </li>
                        
                            <li class="index-item attr">
                                <a href="#attr_page">page</a>
                            </li>
                        
                            <li class="index-item attr">
                                <a href="#attr_params">params</a>
                            </li>
                        
                    </ul>
                </div>
            

            
        </div>

        
            <div id="methods" class="api-class-tabpanel">
                <h2 class="off-left">Methods</h2>

                
                    <div id="method_done" class="method item">
    <h3 class="name"><code>done</code></h3>

    
        <span class="paren">()</span>
    

    

    

    

    

    

    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="..&#x2F;files&#x2F;lib_mini-pages.js.html#l872"><code>lib&#x2F;mini-pages.js:872</code></a>
        
        </p>


        

        
    </div>

    <div class="description">
        <p>Don't run any additional before filters.</p>
    </div>

    

    

    
        <div class="example">
            <h4>Example:</h4>

            <div class="example-content">
                <pre class="code prettyprint"><code>// inside a before filter
function filter () {
  if (Meteor.loggingIn()) {
    this.template("loggingIn");
    this.done();
  }
}
</code></pre>
            </div>
        </div>
    
</div>

                
                    <div id="method_get" class="method item">
    <h3 class="name"><code>get</code></h3>

    
        <div class="args">
            <span class="paren">(</span><ul class="args-list inline commas">
            
                <li class="arg">
                    
                        <code>key</code>
                    
                </li>
            
            </ul><span class="paren">)</span>
        </div>
    

    
        <span class="returns-inline">
            <span class="type">Any</span>
        </span>
    

    

    

    

    

    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="..&#x2F;files&#x2F;lib_mini-pages.js.html#l918"><code>lib&#x2F;mini-pages.js:918</code></a>
        
        </p>


        

        
    </div>

    <div class="description">
        <p>Gets a current invocation value.</p>
    </div>

    
        <div class="params">
            <h4>Parameters:</h4>

            <ul class="params-list">
            
                <li class="param">
                    
                        <code class="param-name">key</code>
                        <span class="type">String</span>
                    

                    

                    <div class="param-description">
                        <p>The key.</p>
                    </div>

                    
                </li>
            
            </ul>
        </div>
    

    
        <div class="returns">
            <h4>Returns:</h4>

            <div class="returns-description">
                
                    
                        <span class="type">Any</span>:
                    
                    The value associated with the key.
                
            </div>
        </div>
    

    
        <div class="example">
            <h4>Example:</h4>

            <div class="example-content">
                <pre class="code prettyprint"><code>// inside before filter
function filter () {
  var post = this.get("post");
}
</code></pre>
            </div>
        </div>
    
</div>

                
                    <div id="method_isDone" class="method item">
    <h3 class="name"><code>isDone</code></h3>

    
        <span class="paren">()</span>
    

    
        <span class="returns-inline">
            <span class="type">Boolean</span>
        </span>
    

    

    

    

    

    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="..&#x2F;files&#x2F;lib_mini-pages.js.html#l889"><code>lib&#x2F;mini-pages.js:889</code></a>
        
        </p>


        

        
    </div>

    <div class="description">
        <p>Returns true if the invocation has been marked as done.</p>
    </div>

    

    
        <div class="returns">
            <h4>Returns:</h4>

            <div class="returns-description">
                
                    
                        <span class="type">Boolean</span>:
                    
                    True if the done() method has been called.
                
            </div>
        </div>
    

    
</div>

                
                    <div id="method_isStopped" class="method item">
    <h3 class="name"><code>isStopped</code></h3>

    
        <span class="paren">()</span>
    

    
        <span class="returns-inline">
            <span class="type">Boolean</span>
        </span>
    

    

    

    

    

    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="..&#x2F;files&#x2F;lib_mini-pages.js.html#l862"><code>lib&#x2F;mini-pages.js:862</code></a>
        
        </p>


        

        
    </div>

    <div class="description">
        <p>Returns true if the invocation has been stopped.</p>
    </div>

    

    
        <div class="returns">
            <h4>Returns:</h4>

            <div class="returns-description">
                
                    
                        <span class="type">Boolean</span>:
                    
                    True if the stop() method has been called.
                
            </div>
        </div>
    

    
</div>

                
                    <div id="method_layout" class="method item">
    <h3 class="name"><code>layout</code></h3>

    
        <div class="args">
            <span class="paren">(</span><ul class="args-list inline commas">
            
                <li class="arg">
                    
                        <code class="optional">[value]</code>
                    
                </li>
            
            </ul><span class="paren">)</span>
        </div>
    

    
        <span class="returns-inline">
            <span class="type">String</span>
        </span>
    

    

    

    

    

    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="..&#x2F;files&#x2F;lib_mini-pages.js.html#l788"><code>lib&#x2F;mini-pages.js:788</code></a>
        
        </p>


        

        
    </div>

    <div class="description">
        <p>Gets or sets the invocation's layout template name.</p>
    </div>

    
        <div class="params">
            <h4>Parameters:</h4>

            <ul class="params-list">
            
                <li class="param">
                    
                        <code class="param-name optional">[value]</code>
                        <span class="type">String</span>
                        <span class="flag optional" title="This parameter is optional.">optional</span>
                    

                    

                    <div class="param-description">
                        <p>An optional layout template name.</p>
                    </div>

                    
                </li>
            
            </ul>
        </div>
    

    
        <div class="returns">
            <h4>Returns:</h4>

            <div class="returns-description">
                
                    
                        <span class="type">String</span>:
                    
                    If no value provided, returns the invocation's layout
template name.
                
            </div>
        </div>
    

    
</div>

                
                    <div id="method_redirect" class="method item">
    <h3 class="name"><code>redirect</code></h3>

    
        <div class="args">
            <span class="paren">(</span><ul class="args-list inline commas">
            
                <li class="arg">
                    
                        <code>path</code>
                    
                </li>
            
                <li class="arg">
                    
                        <code class="optional">[state]</code>
                    
                </li>
            
            </ul><span class="paren">)</span>
        </div>
    

    

    

    

    

    

    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="..&#x2F;files&#x2F;lib_mini-pages.js.html#l833"><code>lib&#x2F;mini-pages.js:833</code></a>
        
        </p>


        

        
    </div>

    <div class="description">
        <p>Stops the current page and redirects to a new path.</p>
    </div>

    
        <div class="params">
            <h4>Parameters:</h4>

            <ul class="params-list">
            
                <li class="param">
                    
                        <code class="param-name">path</code>
                        <span class="type">String</span>
                    

                    

                    <div class="param-description">
                        <p>The path to redirect to.</p>
                    </div>

                    
                </li>
            
                <li class="param">
                    
                        <code class="param-name optional">[state]</code>
                        <span class="type">Object</span>
                        <span class="flag optional" title="This parameter is optional.">optional</span>
                    

                    

                    <div class="param-description">
                        <p>An optional state object to pass along.</p>
                    </div>

                    
                </li>
            
            </ul>
        </div>
    

    

    
        <div class="example">
            <h4>Example:</h4>

            <div class="example-content">
                <pre class="code prettyprint"><code>// before filter
function filter () {
  this.redirect(Meteor.postIndexPath());
}
</code></pre>
            </div>
        </div>
    
</div>

                
                    <div id="method_set" class="method item">
    <h3 class="name"><code>set</code></h3>

    
        <div class="args">
            <span class="paren">(</span><ul class="args-list inline commas">
            
                <li class="arg">
                    
                        <code>key</code>
                    
                </li>
            
                <li class="arg">
                    
                        <code>value</code>
                    
                </li>
            
            </ul><span class="paren">)</span>
        </div>
    

    

    

    

    

    

    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="..&#x2F;files&#x2F;lib_mini-pages.js.html#l899"><code>lib&#x2F;mini-pages.js:899</code></a>
        
        </p>


        

        
    </div>

    <div class="description">
        <p>Set a page variable that can be accessed for the current invocation from
handlebars or downstream before filters. These will be cleared when a new
page is run (i.e. the url path changes). These values are accessible
using the <code>page</code> Handlebars helper.</p>
    </div>

    
        <div class="params">
            <h4>Parameters:</h4>

            <ul class="params-list">
            
                <li class="param">
                    
                        <code class="param-name">key</code>
                        <span class="type">String</span>
                    

                    

                    <div class="param-description">
                        <p>The key. Example: "post".</p>
                    </div>

                    
                </li>
            
                <li class="param">
                    
                        <code class="param-name">value</code>
                        <span class="type">Any</span>
                    

                    

                    <div class="param-description">
                        <p>Any value.</p>
                    </div>

                    
                </li>
            
            </ul>
        </div>
    

    

    
        <div class="example">
            <h4>Example:</h4>

            <div class="example-content">
                <pre class="code prettyprint"><code>// inside before filter
function filter () {
  this.set("post", { _id: 1234 });
}
</code></pre>
            </div>
        </div>
    
</div>

                
                    <div id="method_stop" class="method item">
    <h3 class="name"><code>stop</code></h3>

    
        <span class="paren">()</span>
    

    

    

    

    

    

    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="..&#x2F;files&#x2F;lib_mini-pages.js.html#l850"><code>lib&#x2F;mini-pages.js:850</code></a>
        
        </p>


        

        
    </div>

    <div class="description">
        <p>Stops the current page run. Also stops pushState from being called. Call
this to completely stop. No rendering, no more filters.</p>
    </div>

    

    

    
</div>

                
                    <div id="method_template" class="method item">
    <h3 class="name"><code>template</code></h3>

    
        <div class="args">
            <span class="paren">(</span><ul class="args-list inline commas">
            
                <li class="arg">
                    
                        <code class="optional">[value]</code>
                    
                </li>
            
            </ul><span class="paren">)</span>
        </div>
    

    
        <span class="returns-inline">
            <span class="type">String</span>
        </span>
    

    

    

    

    

    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="..&#x2F;files&#x2F;lib_mini-pages.js.html#l803"><code>lib&#x2F;mini-pages.js:803</code></a>
        
        </p>


        

        
    </div>

    <div class="description">
        <p>Gets or sets the invocation's template name.</p>
    </div>

    
        <div class="params">
            <h4>Parameters:</h4>

            <ul class="params-list">
            
                <li class="param">
                    
                        <code class="param-name optional">[value]</code>
                        <span class="type">String</span>
                        <span class="flag optional" title="This parameter is optional.">optional</span>
                    

                    

                    <div class="param-description">
                        <p>An optional template name.</p>
                    </div>

                    
                </li>
            
            </ul>
        </div>
    

    
        <div class="returns">
            <h4>Returns:</h4>

            <div class="returns-description">
                
                    
                        <span class="type">String</span>:
                    
                    If no value provided, returns the invocation's
template name.
                
            </div>
        </div>
    

    
</div>

                
                    <div id="method_template" class="method item">
    <h3 class="name"><code>template</code></h3>

    
        <div class="args">
            <span class="paren">(</span><ul class="args-list inline commas">
            
                <li class="arg">
                    
                        <code class="optional">[value]</code>
                    
                </li>
            
            </ul><span class="paren">)</span>
        </div>
    

    
        <span class="returns-inline">
            <span class="type">String</span>
        </span>
    

    

    

    

    

    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="..&#x2F;files&#x2F;lib_mini-pages.js.html#l818"><code>lib&#x2F;mini-pages.js:818</code></a>
        
        </p>


        

        
    </div>

    <div class="description">
        <p>Gets or sets the invocation's nav key.</p>
    </div>

    
        <div class="params">
            <h4>Parameters:</h4>

            <ul class="params-list">
            
                <li class="param">
                    
                        <code class="param-name optional">[value]</code>
                        <span class="type">String</span>
                        <span class="flag optional" title="This parameter is optional.">optional</span>
                    

                    

                    <div class="param-description">
                        <p>An optional nav key.</p>
                    </div>

                    
                </li>
            
            </ul>
        </div>
    

    
        <div class="returns">
            <h4>Returns:</h4>

            <div class="returns-description">
                
                    
                        <span class="type">String</span>:
                    
                    If no value provided, returns the invocation's
nav key.
                
            </div>
        </div>
    

    
</div>

                
                    <div id="method_toObject" class="method item">
    <h3 class="name"><code>toObject</code></h3>

    
        <span class="paren">()</span>
    

    
        <span class="returns-inline">
            <span class="type">Object</span>
        </span>
    

    

    

    

    

    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="..&#x2F;files&#x2F;lib_mini-pages.js.html#l934"><code>lib&#x2F;mini-pages.js:934</code></a>
        
        </p>


        

        
    </div>

    <div class="description">
        <p>Returns the invocation's dictionary. This is what is put into Session
before the page is rendered.</p>
    </div>

    

    
        <div class="returns">
            <h4>Returns:</h4>

            <div class="returns-description">
                
                    
                        <span class="type">Object</span>:
                    
                    The invocation's dictionary.
                
            </div>
        </div>
    

    
</div>

                
            </div>
        

        

        
            <div id="attrs" class="api-class-tabpanel">
                <h2 class="off-left">Attributes</h2>

                
                    <div id="attr_context" class="attr item">
    <a name="config_context"></a> 
    <h3 class="name"><code>context</code></h3>
    <span class="type">Object</span>

    

    

    

    

    

    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="..&#x2F;files&#x2F;lib_mini-pages.js.html#l764"><code>lib&#x2F;mini-pages.js:764</code></a>
        
        </p>

        

        
    </div>

    <div class="description">
        <p>The context object from the page-js event.</p>
    </div>

    

    

    
</div>

                
                    <div id="attr_page" class="attr item">
    <a name="config_page"></a> 
    <h3 class="name"><code>page</code></h3>
    <span class="type"><a href="../classes/PageRouter.Page.html" class="crosslink">PageRouter.Page</a></span>

    

    

    

    

    

    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="..&#x2F;files&#x2F;lib_mini-pages.js.html#l780"><code>lib&#x2F;mini-pages.js:780</code></a>
        
        </p>

        

        
    </div>

    <div class="description">
        <p>The invocation's PageRouter.Page instance.</p>
    </div>

    

    

    
</div>

                
                    <div id="attr_params" class="attr item">
    <a name="config_params"></a> 
    <h3 class="name"><code>params</code></h3>
    <span class="type">Object</span>

    

    

    

    

    

    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="..&#x2F;files&#x2F;lib_mini-pages.js.html#l772"><code>lib&#x2F;mini-pages.js:772</code></a>
        
        </p>

        

        
    </div>

    <div class="description">
        <p>The params from the url path.</p>
    </div>

    

    

    
</div>

                
            </div>
        

        
    </div>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="..&#x2F;assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="..&#x2F;assets/js/yui-prettify.js"></script>
<script src="..&#x2F;assets/../api.js"></script>
<script src="..&#x2F;assets/js/api-filter.js"></script>
<script src="..&#x2F;assets/js/api-list.js"></script>
<script src="..&#x2F;assets/js/api-search.js"></script>
<script src="..&#x2F;assets/js/apidocs.js"></script>
</body>
</html>
